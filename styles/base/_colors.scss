/*
  color functions + mixins
*/

@function shade($color, $percentage) {
  @return mix(black, $color, $percentage);
}

@function tint($color, $percentage) {
  @return mix(white, $color, $percentage);
}

@function color-level($color, $level: 500, $color-interval: 18%) {
  @if ($level < 500) {
    $-color-percentage: $color-interval * ((500 - $level) / 100);
    @return tint($color, $-color-percentage);
  } @else if ($level > 500) {
    $-color-percentage: $color-interval * (($level - 500) / 100);
    @return shade($color, $-color-percentage);
  } @else {
    @return $color;
  }
}

@function contrast($color, $dark: color(text, dark), $light: color(text, light)) {
  @if (lightness($color) > 67) {
    @return $dark;
  } @else {
    @return $light;
  }
}

@mixin contrast($color, $dark: color(text, dark), $light: color(text, light)) {
  background: $color;
  color: contrast($color, $dark, $light);
}


/* primary + neutral colors */
$-meadow: #3e9d9d;
$-cloud: #fbfbfd;
$-pebble: #494d58;
$-storm: #cedadf;

/* auxilliary colours */
$-grass: #69bda3;
$-sky: #699dbd;
$-peach: #f7d87f;
$-watermelon: #f77f7f;


/* initial color map */
$colors: (
  primary: $-meadow,
  black: $-pebble,
  neutral: $-storm,
  white: $-cloud,

  success: $-grass,
  info: $-sky,
  danger: $-watermelon,
  warning: $-peach,
  
  neutrals: (
    50: color-level($-storm, 50),
    100: color-level($-storm, 100),
    200: color-level($-storm, 200),
    300: color-level($-storm, 300),
    400: color-level($-storm, 400),
    500: color-level($-storm, 500),
    600: color-level($-storm, 600),
    700: color-level($-storm, 700),
    800: color-level($-storm, 800),
    900: color-level($-storm, 900),
  ),
);


/* color getter function */
@function color($keys...) {
  @if (nth($keys, 1) == neutral and length($keys) > 1) {
    @return map-get(map-get($colors, neutrals), nth($keys, 2));
  }

  $value: $colors;

  @each $key in $keys {
    $value: map-get($value, $key);
  }

  @return $value;
}


/* additional colors */
$colors: map-merge($colors, (
  text: (
    dark: rgba(color(black), .8),
    dark-accent: color(black),
    dark-subtle: rgba(color(black), .6),

    light: rgba(color(white), .8),
    light-accent: color(white),
    light-subtle: rgba(color(white), .6),
  ),
));
